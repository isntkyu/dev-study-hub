## 데이터의 신뢰성 / 확장성 / 유지보수성

에 대해 다룬다.

- 부하매개변수

캐시적중률, 초당 요청수, 데이터베이스 읽기 쓰기 비율, 동시 접속 등이다.

흥미로운건 '캐시적중률' 다른 매개변수들은 생각했었지만 캐시적중률을 부하를 측정하기 위한 요소로써 쓰일 수 있다는 것.

== 캐시가 적중하는 요청은 부하로 측정하지 않을 수 있을 정도의 비용이 든다고도 보인다.

**캐시의 중요성**

---

- 트위터 예시

부하 매개변수중 데이터베이스 읽기 쓰기 비율에 대한 예시로 보인다.

트위터에서 사용자가 타임라인에서 팔로잉 하는 사람들의 트윗을 볼 수 있는 방법에 대해 소개한다.

**방법 1**
사용자가 타임라인을 읽을 때 tweet 테이블에 SELECT 쿼리를 날린다.
(where: 현재 유저, join: 작성자, 팔로잉 id..)

**방법 2**
사용자가 트윗을 게시할 때, 본인의 팔로워들의 홈 타임라인 캐시를 업데이트 한다.
(팔로워들은 캐시를 바로 꺼내서 타임라인을 조회)

트위터의 경우 트윗게시요청은 타임라인 조회요청보다 수백배는 적다.
그러므로 **방법 2**의 경우가 효율적이라고 소개한다.

하지만, 실제로는 **방법 1, 2**를 섞어서 사용한다.
팔로워가 수천만일 경우에 **방법 2** 를 사용하면 읽기 요청에 대한 부하가 많이 클 수있다.
이런 경우엔 팔로워들이 타임라인 조회시점에 **방법 1**의 SELECT 쿼리를 날리면서 본인의 캐시를 업데이트한다.

---

- 프로그래밍언어 자체도 기계어를 추상화 한 것이다.

---

## 응답시간

지연시간보다 클라이언트 입장에서의 총 응답시간이 유의미한 부하측정이다.

- 평균값 보다는 중앙값

평균값을 사용하면 실제로 얼마나 많은 사용자가 평균값 이상의 지연을 겪었는지 알 수 없다.

때문에 중앙값을 사용하는 것이 좋은 지표이다.
중앙 값은 p50 이다.

- p\*\*

ex) p95 가 2초 라고 예시를 들면 95퍼센트의 응답시간은 2초미만이고 5퍼센트의 응답시간은 5초이상.
